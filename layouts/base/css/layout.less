@import (reference) "../../../resources/bootstrap-3.0.3/less/variables.less";
@import (reference) "../../../resources/bootstrap-3.0.3/less/mixins.less";
@import (reference) "../../../resources/bootstrap-3.0.3/less/theme.less";
@import (reference) "../../../resources/bootstrap-3.0.3/less/grid.less";
@import (reference) "../../../resources/bootstrap-3.0.3/less/utilities.less";
@import (reference) "../../../resources/bootstrap-3.0.3/less/forms.less";
@import (reference) "../../../resources/bootstrap-3.0.3/less/navbar.less";
@import (reference) "../../../resources/bootstrap-3.0.3/less/glyphicons.less";
@import (reference) "../../../resources/bootstrap-3.0.3/less/buttons.less";

@import (reference) "../../../resources/font-awesome-4.0.3/less/variables.less";
@import (reference) "../../../resources/font-awesome-4.0.3/less/core.less";

@import (reference) "../../../resources/flexbox.less";

@import (reference) "./variables.less";


html{

}

/* Override some MediaWiki default styles */
li.new a,
a.new{
	color:@new-link-color;
}

a.external:before{
	.fa;
	font-size:0.8em;
	margin-right:1px;
	content: "\f0ac";
}
.plainlinks a.external:before{
	content:"";
	margin:0;
};

#contentSub{
	font-size:0.8em;
}

/* Override default styles for VisualEditor. body tag selector gives higher specificity than the
VisualEditor selectors, which will be appended to the page *after* this file */
body{
	.flexbox();
	.flex-direction(column);
	height:100%;
	height:100vh;
	overflow:hidden;


	/* By default make toolbar always static, we'll override it for larger displays */
	.ve-ui-surfaceToolbar-floating .ve-ui-toolbar-bar,
	.ve-ui-toolbar-bar{
		position:static;
		overflow:visible !important;
	}
	.ve-ui-toolbar-bar{
		background-image:none;
	}
	.ve-ui-barToolGroup .ve-ui-tool {
		height: 1.8em;
		padding: 0.1em;
	}
	/* Ensure the modal is stacked ontop of everything else! */

	.ve-ui-dialog{
		z-index:99999999;
	}

	.ve-ui-inspector-content .ve-ui-window-body form{
		/* Hack for a strange bug in VisualEditor forms which causes inputs to fly off out of view on the edit link popup */
		whitespace:inherit !important;
	}
}



#top-nav{
	flex:0 0 50px;
	.flexbox();
	.flex-direction(row);

	border:none;
}

/* Give the various iframes VisualEditor embeds a white background */
.ve-ui-frame-body{
	background:white;
}



body{
	background: @background-color;

	#content{
		a{
			color: @accent-color;
		}
		a:hover{
			color:lighten(@accent-color,10%);
		}
	}

	@media (min-width: @screen-sm-min) {

		/* Extra padding when VisualEditor toolbar is displayed fixed */
		&.veaction-edit{
			padding-top:110px;
		}

		/* VisualEditor should be a fixed position toolbar on higher resolutions */
		.bootstrap-ve .ve-ui-surfaceToolbar-floating .ve-ui-toolbar-bar,
		.bootstrap-ve .ve-ui-toolbar-bar{
			position:fixed;
			z-index:1;
			overflow:visible;
			top:50px;
			left:0;
			right:0;
		}
	}
}

.breadcrumbs{
	ul{
		padding:0;
		margin:0;
		li{
			display:inline;
		}
		li::after{
			content: " > ";
		}
		li:last-child::after{
			content: '';
		}
	}

	&::after{
		content: "";
		clear:left;
	}
}


/* Use flexbox layout to glue footer to bottom of page
We'll have to provide an alternate method for <IE11 */
html{
	min-height:100vh;
}
body{
	min-height:100vh;

	#page{
		@media screen {
			.flexbox();
			.flex-direction(column);
			.align-content(stretch);
			.flex-grow(1);
			.flex-shrink(0);
			flex: 1 0;
			overflow-y: scroll;
		}


		#lower-container{
			.flex-grow(1);
			flex: 1 0 auto;
		}
		#lower-container:after{
			content:"";
			clear:both;
		}
		#main-footer{

		}
	}
}

#main-footer{
	position:relative;

	margin:20px 0 0 0;

	background-color:darken(@background-color, 5%);

	.container {
		padding:20px 0;
	}

	#f-links{
		list-style-type: none;
		padding: 0;
		margin: 0;
	}

	@media (min-width: @screen-sm-min) {
		#f-poweredbyico{
			float:right;
			clear:right;
		}
	}

}

#wpTextbox1{
	width:100%;
}

/* Reset the TOC */
#toc, .toc{
	width:auto;
	display:block;
	border:none;
	#toctitle{
		text-align: left;
	}
	.tocnumber{
		display:none;
	}
}
.site-notice{
	.alert-info;
}

.navbar{
	.first{
		.order(0);
	}
	.second{
		.order(20);
	}
	.third{
		.order(30);
	}
	.fourth{
		.order(40);
	}
	.last{
		.order(999);
	}
}
.nav li{
	position:relative;
}
/*#ca-edit::before{
	.glyphicon;
	position:absolute;
	top:0;
	left:0;
}*/
/*#ca-edit{
	.glyphicon-edit;
}*/

/* Hide toolbox menu for non-logged in users */
body:not(.user-loggedin) .toolbox-menu{
	display:none !important;
}


/* Rules which affect more or less all navbar styles */
#top-nav{

	margin-bottom:0;
	border-radius:0;

	.container{
		position:relative;
	}

	.container

	.navbar-menu-toggle{
		left:5px;
		top:0;
		.icon{
			font-size:2em;
		}
		.navbar-toggle{
			margin:0;
		}
		button{
			color:@navbar-text-color;
		}
	}

	.navbar-brand{
		display:block;
		float:none;
		margin:0 20px;
		text-align:center;
	}


	@media (min-width: @screen-sm-min) {

		//menus are collapsed by default, but they should be visible on higher resolutions
		.navbar-menu.collapse{
			display:block;
		}

		.navbar-brand{
			display:inline-block;
			float:none;
			margin:0;
			text-align:left;
			padding-left:0;
		}

		.navbar-toggle{
			display:none;
		}
	}

}

@media (min-width: @screen-sm-min) {
	/* Correct display errors when using flexbox */
	.navbar:before, .navbar:after,
	#top-nav .container:before, #top-nav .container:after{
		display:none !important;
	}
}

/* Rules for the default navbar style */
#top-nav.default{
	#gradient .vertical(lighten(@navbar-bg-color, 2%); darken(@navbar-bg-color, 2%));
	color: @navbar-text-color;

	a{
		color: @navbar-text-color;
	}

	.nav .open > a, .nav .open > a:hover, .nav .open > a:focus {
	    background-color: @accent-color;
	}
	.nav > li > a:hover, .nav > li > a:focus {
    text-decoration: none;
    background-color: @accent-color;
	}
	.dropdown-menu{
		background-color: @accent-color;
		border-color:lighten(@accent-color,10%)
	}
	.dropdown-menu .divider{
		background-color:lighten(@accent-color,20%)
	}
	.dropdown-menu > li > a:focus {
		background-color: @accent-color;
	}
	.dropdown-menu > li > a:hover{
		background-color: darken(@accent-color, 8%)
	}

	.navbar-brand .topnav-name{
		font-weight: bold;
		font-size: 120%;
	}


	@media (max-width: @screen-sm-min){

		.navbar-brand{
			display:inline-block;
			float:none;
			text-align:center;
			margin:0 auto;
			padding-left:0;
		}

		.navbar-search{
			display:block;
		}

	}
	.navbar-menu{

		.title{
			display:inline;
		}

	}



	@media (min-width: @screen-sm-min) {

		.navbar-menu-toggle{
			display: none;
		}

		.container{
			.flexbox();
			.flex-direction(row);
			.justify-content(space-between);
			.align-items(center);
		}

		.navbar-search{
			flex:1 1;
			display: flex;
    	align-items: flex-end;
    	justify-content: center;
			form{
    		flex: 0 1 300px;
			}
		}

		.navbar-menu{
			display:block;
			/* Hide titles when displaying inline */
			&.icons-only .nav .title{
				display:none;
			}
			/* Undo the collapsing which happens at screen-sm-min by default */
			.navbar-nav{
				margin:0;
				& > li{
					display:inline-block;
					float:none;
				}
			}

		}

		.navbar-links{
			ul{
				float:none;
				.flexbox();
				.flex-direction(row);
				.justify-content(space-between);
				li{
					float:none;
				}
			}
		}

		.navbar-search, .navbar-brand, .navbar-menu{

		}

	}
} /* /#top-nav */



#content-container{

	padding-top:0;

	#content{
		flex:1;
		order:2;

		/* Hide standard TOC */
		.toc{
			display:none;
		}
	}

	.shared-sidebar{
		flex-basis: 200px;
		.fancy-toc{
			margin-top:20px;
		}

		/* The sidebar TOC is hidden on mobile devices */
		.toc{
			display:none;
		}

	}
	nav#related{

		margin:20px 0 0 0;

		.related-nav-section{
			flex: 0 0 150px;
		}
	}

	/* When the navbar is static, we don't get it's margin. */
	@media (min-width: @screen-sm-min) {
		padding-top:10px;
	}
	@media (min-width: @screen-md-min) {

		/* Bigger screens get sidebars */
		.flexbox();
		.flex-direction(row);

		&.has-toc{
			#content{
				order: 2;

				.toc{
					display: none;
				}
			}
			.shared-sidebar{
				padding:0 20px 0 0;

				.toc{
					display:block;
					h2{
						font-size:1.3em;
					}
					& > ul{
						padding:5px;
						list-style:none;
						ul {
							list-style: none;
							margin-left: 5px;
							padding: 0;
							font-size:90%;
						}
					}
					a{
						color: #555;
					}
				}
			}
		}

		.shared-sidebar{
			.flexbox();
			.flex-direction(row);
			.flex-direction(column);

			order: 1;
			margin: 0 20px 0 0;

		}

		nav#related{
			.flexbox();
			.flex-direction(row);
			.justify-content(start);
			order:3;
			.flex-basis(150px);
			.flex-direction(column);

			margin: 0 0 0 20px;

			.related-nav-section{
				flex: 0 0 150px;
			}
		}
	}
}

#wpSave,
#wpPreview,
#wpDiff,
input[type=submit],
input[type=button],
button{
	.btn;
}
#wpSave{
	.button-variant(@inverse-text-color, @accent-color, darken(@accent-color, 10%));
}

.multipleTemplateAdder{
	.btn;
	.button-variant(@inverse-text-color, @accent-color, darken(@accent-color, 10%));
}

#preferences{
	legend.mainLegend{
		display:none;
	}

	.mw-label{
		label{
			padding-right:10px;
		}
	}

	fieldset{
		legend{
			font-size:1.4em;
		}
		padding-bottom:25px;

		margin-bottom:25px;
	}
}
#preftoc{
	list-style:none;
	padding:0;
	margin:0;

	background: @navbar-bg-color;
	border-radius:5px;

	margin-bottom:30px;

	.flexbox();
	.flex-wrap(wrap);
	.justify-content(space-around);
	li{
		a{
			display:inline-block;
			padding:10px 20px;
		}
		&.selected{
			a{
				color:@accent-color;
			}
		}
	}

}


/* Prevent increased font size from interfering with existing MW layout */
.mw-ui-container{
	font-size:0.8em;
}


@media print {
	#top-nav{
		display:none;
	}
	*{
		font-size:1rem;
	}
}
